<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Prepare data frame for MAR analysis — prepare.data • MAR1</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Prepare data frame for MAR analysis — prepare.data"><meta property="og:description" content="Formats a data frame of variable time-series for use in run.mar"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MAR1</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare data frame for MAR analysis</h1>
    
    <div class="hidden name"><code>prepare.data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Formats a data frame of variable time-series for use in <code>run.mar</code></p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">prepare.data</span><span class="op">(</span><span class="va">data</span>, increment<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"month"</span>,<span class="st">"year"</span>,<span class="st">"week"</span>,<span class="st">"day"</span><span class="op">)</span>, fill.gap<span class="op">=</span><span class="fl">0</span>, </span>
<span>  replace.0s<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>,<span class="st">"rand.half"</span>,<span class="st">"add.ones"</span><span class="op">)</span>,  log<span class="op">=</span><span class="cn">FALSE</span>, </span>
<span>  z.method<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">FALSE</span>,<span class="st">"standard"</span>,<span class="st">"deseason"</span><span class="op">)</span>, order<span class="op">=</span><span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>Data frame to be transformed: first column dates, following columns variable time-series</p></dd>


<dt>increment</dt>
<dd><p>Time-step increment data are to be averaged into: "month", "year", "week", or "day"</p></dd>


<dt>fill.gap</dt>
<dd><p>Maximum length of gap between time-steps to be filled by linear interpolation</p></dd>


<dt>replace.0s</dt>
<dd><p>How zeros in the time-series should be dealt with:</p><table class="table table"><tr><td></td><td></td><td>"rand.half" :</td><td>replace zeros with random values less than 1/2 the minimum non-zero value for the variable</td></tr><tr><td></td><td></td><td>"add.ones" :</td><td>add 1 to all values in time-series</td></tr><tr><td></td><td></td><td>FALSE :</td><td>leave zeros in the data</td></tr></table></dd>


<dt>log</dt>
<dd><p>Should the data be log-transformed?</p></dd>


<dt>z.method</dt>
<dd><p>Standardize the data so all variables have equal means and standard deviations:</p><table class="table table"><tr><td></td><td></td><td>"standard" :</td><td>subtracts the overall variable mean and divides by the overall variable standard deviation</td></tr><tr><td></td><td></td><td>"deseason" :</td><td>subtracts the variable mean for the increment (across years) and divides by the variable</td></tr><tr><td></td><td></td><td></td><td>standard deviation for the increment</td></tr><tr><td></td><td></td><td>FALSE :</td><td>do not standardize the data</td></tr></table></dd>


<dt>order</dt>
<dd><p>The order in which year, month, and day are recorded in the date format in the first column of <code>data</code>.  Defaults to <code>NULL</code>, for which an attempt is made by the function to distinguish the date format, but the argument should be provided as "ymd", "mdy", etc., if the function cannot distinguish the order on its own</p></dd>


</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The <code><a href="run.mar.html">run.mar</a></code> function requires a data frame consisting of a continuous time-block indicator variable in the first column, dates/time-steps in the second column, and variable time-series with evenly spaced time-step increments in the remaining columns.  This function automatically creates the continuous time-block variable column and aggregates the time-series into evenly spaced increments as indicated by the <code>increment</code> argument.  Although it automatically tries to assess the format of the dates in <code>data</code>, the <code>order</code> argument may have to be provided if this fails (for example, in the case where all dates in the dataset fall before the 12th of each month).</p>
<p>Other transformations that are commonly applied to ecological data prior to MAR modeling (e.g., Hampton et al. 2006, Ives et al. 2003) can optionally be performed, but are skipped by default with their respective arguments set to FALSE.</p>
    </div>
    <div id="value">
    <h2>Value</h2>
    

<p>A data frame with a continuous time-block indicator variable in the first column, dates/time-steps in the second column, and variable time-series with evenly spaced time-step increments in the remaining columns</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Hampton SE, Scheuerell MD, and Schindler DE (2006) Coalescence in the Lake Washington story: Interaction strengths in a planktonic food web. Limnology and Oceanography 51:2042-2051</p>
<p>Ives AR, Dennis B, Cottingham KL, and Carpenter SR (2003) Estimating community stability and ecological interactions from time-series data. Ecological Monographs 73:301-330</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>LP Scheef</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">L4.AllDates</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">L4.mar</span><span class="op">&lt;-</span><span class="fu">prepare.data</span><span class="op">(</span>data<span class="op">=</span><span class="va">L4.AllDates</span>, increment<span class="op">=</span><span class="st">"month"</span>, fill.gap<span class="op">=</span><span class="fl">0</span>, </span></span>
<span class="r-in"><span>replace.0s<span class="op">=</span><span class="st">"rand.half"</span>, log<span class="op">=</span><span class="cn">TRUE</span>, z.method<span class="op">=</span><span class="st">"deseason"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data successfully aggregated into monthly time steps</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Time-series contains 175 continuous time-steps</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 248 zeros replaced</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data successfully log-transformed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data successfully z-scored with deseasoning</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Lindsay P. Scheef.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

